<html>
<head>
<title>Fastclick</title>
<style>
body {
	margin: 0;
	padding: 0;
	overflow: hidden;
}

#container {
	width: 500px;
	height: 400px;
}
</style>
</head>
<script type="text/javascript" src="swfobject.js"></script>
<script src="//connect.facebook.net/en_US/all.js"></script>
<body marginwidth="0" marginheight="0" topmargin="0" leftmargin="0">
	<div id="fb-root"></div>
	<style type="text/css" media="screen">
html,body {
	height: 100%;
}

body {
	margin: 0;
	padding: 0;
	overflow: auto;
	text-align: center;
	background-color: #ffffff;
}

object:focus {
	outline: none;
}

#flashObject {
	display: none;
}
</style>

	<script type="text/javascript">
		// For version detection, set to min. required Flash Player version, or 0 (or 0.0.0), for no version detection. 
		var swfVersionStr = "10.1.0";
		// To use express install, set to playerProductInstall.swf, otherwise the empty string. 
		var xiSwfUrlStr = "playerProductInstall.swf";
		var flashvars = {};
		var params = {};
		params.quality = "high";
		params.bgcolor = "#ffffff";
		params.allowscriptaccess = "always";
		params.allowfullscreen = "true";
		var attributes = {};
		attributes.id = "Testing";
		attributes.name = "Testing";
		attributes.align = "middle";
		swfobject.embedSWF("FastClick.swf", "flashObject", "100%", "100%",
				swfVersionStr, xiSwfUrlStr, flashvars, params, attributes);
		// JavaScript enabled so display the flashContent div in case it is not replaced with a swf object.
		swfobject.createCSS("#flashObject", "display:block;text-align:left;");
	</script>
	<!-- SWFObject's dynamic embed method replaces this alternative HTML content with Flash content when enough 
             JavaScript and Flash plug-in support is available. The div is initially hidden so that it doesn't show
             when JavaScript is disabled.
        -->
	<div id="flashObject">
		<p>To view this page ensure that Adobe Flash Player version 10.1.0
			or greater is installed.</p>
		<script type="text/javascript">
			var pageHost = ((document.location.protocol == "https:") ? "https://"
					: "http://");
			document
					.write("<a href='http://www.adobe.com/go/getflashplayer'><img src='" 
                                + pageHost + "www.adobe.com/images/shared/download_buttons/get_flash_player.gif' alt='Get Adobe Flash player' /></a>");
		</script>
	</div>
	<script>
	const FACEBOOK_APP_ID = '300602210033160';
		window.fbAsyncInit = function() {

			FB.init({
				appId : FACEBOOK_APP_ID, // App ID
					ÊfrictionlessRequests:true,
					 channelUrl:'/channel.html', // Channel File
					 status:true, // check login status
					 cookie:true, // enable cookies to allow the server to access the session
					 oauth:true
			// parse XFBML
			});
				
			function fetchMeFriends(response){
				FB.api("/me", function(response){
	            	window.swfobject.getObjectById('Testing').onMe(response);
	            	
	            	FB.api("/me/friends", function(response){
		            	window.swfobject.getObjectById('Testing').onFetchFriends(response);
		            });
	            	
	            });
	            
			}
			
			FB.getLoginStatus(function(response){
				console.dir(response);
				if(response.status == "connected")
				{
					fetchMeFriends(response);
				}else
				{
					FB.login(function(response) {
	        		  console.dir(response);
		  				if (response.authResponse) {
		  					fetchMeFriends(response);
		  				} else {
		  					console.log('User cancelled login or did not fully authorize.');
		  				}
		  			}, {scope:'email,user_about_me,publish_stream'});
					
				}
			});
		};
		
		var crowdparkFlash = {
			
			facebookInviteFriends:function (data) {
				        console.log('>>> facebookInviteFriends');
						
				        
				        var dataJson = JSON.stringify(data);
				        
				        dataObject = JSON.parse(dataJson);
				        console.debug(dataObject);

				    
				        FB.ui(
				            {
				                app_id:FACEBOOK_APP_ID,
				                method:'apprequests',
				                display:'iframe',
				                title:'Select some of your friends',
				                message:'Come and play Fastclick',
				                data:{
				                    'trackingUid':dataObject.trackingUid,
				                //    'swfaddress':'/assets/swf/MainApp.swf',
				                    'type':'invite',
				                    'model':'',
				                    'id':dataObject.id
				                },
				                'filters':['app_non_users']
				            },

				            function (response) {
				            }
				        );
				    },
				
			facebookSendGift:function (data) {
				        console.log('>>> facebookSendGift');
				        console.log(data);
				        var dataJson = JSON.stringify(data);
				        	
				       	dataObject = JSON.parse(dataJson);
				        console.debug(dataObject);

				      
				        FB.ui(
				            {
				                app_id:FACEBOOK_APP_ID,
				                method:'apprequests',
				                message:dataObject.message,
				                data:{
				                    'type':dataObject.type,
				                    'amount':dataObject.amount
				                },
				                title:'Send Gift',
				                to:dataObject.uid
				            },

				            function (response) {
				                var data;
								if (response) {
				                	data = parseFloat(response.request);
				                } else {
				                	data = parseFloat(0);
				                }
				                console.log(data);
				                
				                window.swfobject.getObjectById('Testing').facebookSendGift(data);
				            }
				        );
				    },
				
		}
		
		
	</script>

</body>
</html>